# Environment Configuration Template
# Copy this file to .env and fill in the values
# For production, use secure passwords and API keys

# =============================================================================
# Database Configuration
# =============================================================================

# Database password (generate with: openssl rand -base64 32)
DB_PASSWORD=your-secure-password-here

# Database user (default: postgres)
DB_USER=postgres

# Database name (default: logs)
DB_NAME=logs

# Database port (default: 5432)
DB_PORT=5432

# SSL mode for database connection
# Options: disable, allow, prefer, require, verify-ca, verify-full
# For production, use: require or verify-full
DB_SSLMODE=prefer

# =============================================================================
# Server Configuration
# =============================================================================

# Server host (0.0.0.0 to listen on all interfaces)
SERVER_HOST=0.0.0.0

# Server port (default: 8080)
# Change this if you want to use a different port
SERVER_PORT=8080

# =============================================================================
# Application Configuration
# =============================================================================

# Batch processing size (number of logs to batch before flushing)
# Increase for higher throughput, decrease for lower latency
BATCH_SIZE=1000

# Batch flush interval (how often to flush batches even if not full)
# Format: 5s, 10s, 1m, etc.
BATCH_FLUSH_INTERVAL=5s

# =============================================================================
# Rate Limiting Configuration
# =============================================================================

# Enable rate limiting (true/false)
RATELIMIT_ENABLED=true

# Default requests per second per API key
RATELIMIT_DEFAULT_RPS=100

# Burst size (allows short bursts above RPS limit)
RATELIMIT_BURST=200

# =============================================================================
# Authentication Configuration
# =============================================================================

# API keys (comma-separated list)
# Generate secure keys with: openssl rand -hex 32
# Example: API_KEYS=key1,key2,key3
API_KEYS=your-api-key-1,your-api-key-2

# =============================================================================
# Notes
# =============================================================================
# 
# Security Best Practices:
# 1. Generate secure passwords: openssl rand -base64 32
# 2. Generate secure API keys: openssl rand -hex 32
# 3. Set file permissions: chmod 600 .env
# 4. Never commit .env files to version control
# 5. Use DB_SSLMODE=require or verify-full in production
# 6. Use a reverse proxy (Nginx/Caddy) with HTTPS in production
# 
# Performance Tuning:
# - Increase BATCH_SIZE for higher throughput (monitor memory)
# - Decrease BATCH_FLUSH_INTERVAL for lower latency
# - Adjust RATELIMIT_DEFAULT_RPS based on expected load
# 
# Production Checklist:
# - [ ] Change all default passwords
# - [ ] Generate secure API keys
# - [ ] Set DB_SSLMODE=require
# - [ ] Configure firewall (UFW)
# - [ ] Set up reverse proxy with HTTPS
# - [ ] Configure monitoring and alerts
# - [ ] Set up automated backups
# - [ ] Review and adjust resource limits in docker-compose.prod.yml
